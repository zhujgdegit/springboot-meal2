<!--
                ___           ___           ___           ___           ___
               /\__\         /\  \         /\  \         /\  \         /\__\
              /::|  |       /::\  \       /::\  \       /::\  \       /:/  /
             /:|:|  |      /:/\:\  \     /:/\:\  \     /:/\:\  \     /:/  /
            /:/|:|  |__   /::\~\:\  \   /:/  \:\  \   /:/  \:\  \   /:/  /
           /:/ |:| /\__\ /:/\:\ \:\__\ /:/__/ \:\__\ /:/__/ \:\__\ /:/__/
           \/__|:|/:/  / \/__\:\/:/  / \:\  \  \/__/ \:\  \  \/__/ \:\  \
               |:/:/  /       \::/  /   \:\  \        \:\  \        \:\  \
               |::/  /        /:/  /     \:\  \        \:\  \        \:\  \
               /:/  /        /:/  /       \:\__\        \:\__\        \:\__\
               \/__/         \/__/         \/__/         \/__/         \/__/
-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="admin/_fragments :: head(~{::title})">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>查看用户点餐</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <link rel="stylesheet" href="../../static/css/me.css" th:href="@{/css/me.css}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Naccl/blog-resource/github-badge.min.css">
</head>
<body class="site">

  <!--导航-->
  <nav th:replace="admin/_fragments :: menu(4)" class="ui inverted attached segment m-padded-tb-mini m-shadow-small">
  </nav>

  <div class="site-content">

    <!--中间内容-->
    <div class="m-container-small m-padded-tb-big">
      <div class="ui container">

          <!-- message不为空时显示 -->
          <div class="ui success message" th:unless="${#strings.isEmpty(message)}">
              <i class="close icon"></i>
              <div class="header">提示：</div>
              <p th:text="${message}">操作成功！</p>
          </div>
          <!-- 搜索 -->
          <div class="ui secondary segment form">
              <!-- 用于上一页下一页传递page -->
              <input type="hidden" name="page">

              <div class="inline fields">
                  <div class="field">
                      <input type="text" name="ordCode" placeholder="请输入订单编号">
                      <!--                      <div class="ui labeled action input">-->
<!--                          <div class="ui type selection dropdown">-->
<!--                              <input type="hidden" name="typeId" value="0">-->

<!--                              <i class="dropdown icon"></i>-->
<!--                              <div class="default text">全部</div>-->
<!--                              <div class="menu">-->
<!--                                  <div class="item" data-value="0">全部</div>-->
<!--                                  <div class="item" data-value="1" th:each="type:${types}" th:data-value="${type.id}" th:text="${type.name}">全部</div>-->
<!--                              </div>-->
<!--                          </div>-->
<!--                      </div>-->
                  </div>

                  <div class="field">
                      <button type="button" id="search-btn" class="ui teal basic button"><i class="search icon"></i>搜索</button>
                  </div>
              </div>
          </div>

          <dev id="table-container" th:fragment="orderList">
              <table class="ui teal table m-text" style="text-align:center;">
                  <thead>
                  <!--          <th colspan="2"><h1 class="ui header" align="center" th:text="${item.key.username}">user1</h1></th>-->
                  <tr>
                      <!--            <th>用户名</th>-->
                      <!--            <th>菜品名称</th>-->
                      <th>USER NAME</th>
                      <th>PHONE</th><!--用户电话号码-->
                      <th>DISH NAME</th>
                      <th>ORDER CODE</th><!--订单号-->
                      <th>CREAT TIME</th><!--下单时间-->
                      <th>STATE</th>
                      <th>APPRAISE</th>
                      <th>OPERATE</th>
                  </tr>
                  </thead>


                  </tbody>
                  <tbody>
                  <tr th:each="item : ${orderMap}">
                      <td th:text="${item[0]}"></td> <!-- 第一个字段是用户名 -->
                      <td th:text="${item[1]}"></td> <!-- 用户电话 -->
                      <td th:text="${item[2]}"></td> <!-- 第二个字段是菜品名称 -->
                      <td th:text="${item[3]}"></td> <!-- 订单号 -->
                      <td th:text="${item[4]}"></td> <!-- 下单时间 -->
                      <td th:text="${item[5]}"></td> <!-- 第二个字段是订单状态 -->
                      <td th:text="${item[6]}"></td> <!-- 菜品评价 -->
                      <td style="padding:5px">
                        <a onclick="del(this)" th:data-href="@{/admin/foods/{ordCode}/delete(ordCode=${item[3]})}" class="ui mini red basic button" style="padding:8px 10px">删除</a>
                      </td>
                  </tr>
                  </tbody>
              </table>
          </dev>
      </div>
    </div>

  </div>

  <!--底部footer-->
  <footer th:replace="_fragments :: footer" class="ui inverted vertical segment">
  </footer>

  <!--/*/<th:block th:replace="admin/_fragments :: myScript">/*/-->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
  <!--/*/</th:block>/*/-->
  <script>
      var ordCode = "";
      $("#search-btn").click(function () {
          ordCode = $("[name='ordCode']").val();
          loadData();
      });

      function loadData() {
          $("#table-container").load(/*[[@{/search}]]*/"/admin/orders/search", {
              ordCode: ordCode
          });
      }
  </script>
</body>
</html>